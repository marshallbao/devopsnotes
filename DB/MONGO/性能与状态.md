db.system.profile.find().sort({$natrual: -1}).limit(10)

db.currentOp()

db.killOp(1347052)

容器环境mongo内存占用过大原因及限制方法：
原因：
1、存储引擎 Cache
2、TCP 连接及请求处理
限制：
1、设置合理的-wiredTigerCacheSize值（默认使用的是(系统内存-1GB)*50%）
2、限制mongo的并发连接数

---
操作
1、查看目前内存设置
db.serverStatus().wiredTiger.cache['maximum bytes configured']/1024/1024/1024
2、启动参数添加 --wiredTigerCacheSizeGB=10



状态查看

mongotop

mongotop -uroot -p rootpassword --authenticationDatabase=admin

mongostat

mongostat -uroot -p rootpassword --authenticationDatabase=admin

db.currentOp() 

db.serverStatus()

db.serverStatus().connections