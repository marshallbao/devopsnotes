ES是如何实现节点容灾的

1. ES中的index，首先会进行分片，每个分片数据通常都会有本身的副本数据，ES分配分片的策略会保证同一个分片数据和本身的副本不会分配到同一个节点上
2. 当集群中的某一节点宕机后，ES的master在ping该节点时经过必定的策略会发现该节点不存活；此时，ES开启恢复过程，恢复的策略以下：
     2.1.  恢复的目标是保证集群中分片的副本数不变
     2.2.  若是宕机的节点上承载某分片的主分片，那么此时（恢复过程）会将该分片分配在其余节点上的某一副本提高为主分片（记住：同一分片和其副本老是不在同一节点上，那么此事是保证有对应的副本可供提高的）
     2.3.  根据1保证副本数不变，若是宕机的节点承载某分片的副本，那么ES会在其余非宕机节点上用主分片复制一个副本
     2.4.  整个过程不影响集群的读写功能；可是因为多了复制分片和迁移分片的过程，集群的读写性能受影响 