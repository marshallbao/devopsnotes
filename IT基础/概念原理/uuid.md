### 1、什么是 UUID

UUID 的全称是 Universally Unique Identifier，即通用唯一识别码。目的是让分布式系统中的所有元素都能有唯一的识别信息。

构成：由一组**32位**数的**16进制**数字所构成。

格式：以连字号分为五段，表现形式为**8-4-4-4-12**的32个字符，如下所示：

```
xxxxxxxx-xxxx-Mxxx-Nxxx-xxxxxxxxxxxx
如：30385d15-0a88-42eb-bc43-2c000e9f778c
```

其中 M 与 N 都有特殊含义：

- M 表示 UUID版本，目前只有五个**版本**，即只会出现1，2，3，4，5（下文会介绍这五个版本）
- 数字 N 的一至三个最高有效位表示 UUID **变体**，目前只会出现 8，9，a，b 四种情况。

其他：理论上的总数为1632=2128，约等于3.4 x 10123。也就是说若每纳秒产生1百万个 UUID，要花100亿年才会将所有 UUID 用完。

### 2、UUID 的版本

##### （1）v1 (timestamp)

原理：timestamp + MAC 地址。

缺点：

- 机器的MAC地址出厂后不能保证完全唯一，且之后 MAC 地址也可手动修改
- MAC 地址的暴露会造成了隐私与安全问题
- 若一台机子上的两个进程同时跑，有可能出现重复问题

##### （2）v2 (timestamp)

原理：基于 v1 的基础上优化了下，更安全。

> 具体优化细节不赘述了。

##### （3）v3 (namespace)

原理：基于 namespace + 输入内容 进行 MD5。

##### （4）v4 (random)

原理：基于随机数。

这个版本的UUID是**使用最多**的。

##### （5）v5 (namespace)

原理：跟 V3 差不多，只是把散列算法的 MD5 变成 SHA1。