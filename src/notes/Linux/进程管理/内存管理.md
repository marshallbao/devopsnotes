#### OOM Killer 如何工作

启动机制

当系统内存不足时，内核通过以下步骤启动 OOM Killer：

- 内核定期检查系统的内存使用情况。
- 如果发现所有可用的内存（包括物理内存和交换空间）都耗尽，并且系统已经无法分配内存，内核会触发OOM Killer。

选择进程

OOM Killer 选择那些最适合被终止的进程，以尽可能地释放内存，并尽量减少对系统的整体影响。选择进程时，

内核会根据以下指标计算一个得分（OOM score），以决定哪个进程应该被终止：

1. 内存使用量：
   - 使用更多内存的进程更有可能被终止
2. 进程优先级（OOM 调整值，oom_score_adj）：
   - 设置为更高的 `oom_score_adj` 值的进程更可能被终止
   - 范围从 -1000（从不终止）到 1000（优先终止）
3. 进程优先级与内存占用的组合：
   - 内核计算一个综合得分（`oom_score`），比例越高，进程更有可能被终止。