# 备份恢复

pg_dump

```
## 备份数据
pg_dump -U username -d database_name > table_structure.sql
pg_dump -U  postgres -d bitnami_application > 20250825.sql
# 只导出数据结构
pg_dump -U username -d database_name -s  table_name > table_structure.sql

# 指定表
pg_dump -U username -d database_name -s -t schema_name.table_name > table_structure.sql

# 指定 schema
pg_dump -U username -d database_name -n schema_name -F c -f schema_name.dump

# 参数
-s 或 --schema-only 表示只导出表结构，不包括数据。
-t 或 --table 指定要导出结构的表名。
-n 指定 schema
-c 或 --clean 在每个对象前加 DROP TABLE/SEQUENCE/...

## 恢复
psql -U username -d database_name -f backup.sql

---
# 适合大库，使用 -F c, 可以用 pg_restore 恢复
# 备份
pg_dump -U username -d database_name -F c -f database_name.dump

# 恢复
pg_restore -U username -d database_name database_name.dump

# 先清空，再恢复
pg_restore -U username -d database_name -c database_name.dump
```

